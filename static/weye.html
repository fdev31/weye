<!DOCTYPE html>
<html>
  <head>
    <title>File manager</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap -->
    <link rel="icon" type="image/ico" href="/static/favicon.png">
    <link href="/static/css/bootstrap.min.css" rel="stylesheet" media="screen">
    <link href="/static/css/bootstrap-responsive.min.css" rel="stylesheet" media="screen">
    <link href="/static/css/jquery.pnotify.default.css" rel="stylesheet" media="screen">
    <link type="text/css" rel="stylesheet" href="/static/css/theme.css" media="screen">

<!--   TEMPLATES -->
<script id="view_file" type="text/html">
    <button id="backlink" class="btn" onclick="go_back()"><i class="icon-arrow-left" /> Back</button>
      <a title="Share item with RightClick>Copy location" href="{{permalink}}"  ><i class="icon-bookmark"/> Permalink</a>

          <h1><img class="big_icon" src="/static/mime/{{item.mime}}.svg"/> <small>{{item.cont}}</small>{{item.name}}</h1>

          <div class="btn-toolbar" id="main_buttons"><a id="download_link" class="btn btn-large btn-primary" title="Click to download" href="/d{{item.path}}"> Get <em>{{item.mime}}</em> (<span class="filesize">{{item.size}}</span>)</a></div><hr/>
</script>
<!--
# mandatory #
i: ID
m: mime
f: link

# adviced #
t: title (defaults to link)
s: searchable (defaults to link, space separated list of "D" fields)

# optional #
d: description (used in title=)
c: classes 
D: data{k:key, v:value} used in data protocol
e: space-separated list of editable field names (editable)

-->
<script id="view_generic" class="partial" type= "text/html">
    <div class="item span12 {{c}}" data-searchable="{{s}}" data-link="{{f}}" data-mime="{{m}}" data-uid="{{i}}" data-name="{{t}}" data-editable="{{e}}"
        {{#D}}
        data-{{k}}="{{v}}"
        {{/D}}
        >
      <img src="/static/mime/{{m}}.svg" class="small_icon item_caption item_stuff"/>
      <span title="{{d}}" class="item_stuff item_caption">{{t}}</span>
      <i class="show_on_hover small_icon icon-edit" onclick="ItemTool.popup($(this).parent());false;" />
    </div>
</script>
<script id="view_list" type="text/html">
    {{#backlink}}
        <button id="backlink" class="btn" onclick="go_back()"><i class="icon-arrow-left"/> Back</button>
            <a title="Share item with RightClick>Copy location" href="{{permalink}}" ><i class="icon-bookmark"/> Permalink</a>
        {{/backlink}}
        {{#mime}}
        <header>
            <hgroup>
            <h2><img src="/static/mime/{{mime}}.svg" class="big_icon"/> <small>{{cont}}</small>{{name}}</h2>
            </hgroup>
        </header>
        {{/mime}}
       {{#have_child}}
        <div class="items row-fluid">
            <br/>
            {{#child}}
            {{>view_generic}}
            {{/child}}
        </div>
        {{/have_child}}
        {{^have_child}}
        <div>
        No item.
        </div>
        {{/have_child}}
</script>
<script id="input_text" type="text/html">
    <div class="row-fluid"><span class="label">{{name}}</span></div>
    <input
    type="text"
    class="{{^class}}input-xxlarge{{/class}}{{#class}}{{class}}{{/class}}"
    placeholder="{{name}}"
    value="{{content}}"
    ></input>
</script>
<script id="question" type="text/html">
    <div class="modal hide fade" id="question_popup">
          <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
              <h3>{{header}}</h3>
          </div>
          <h4><img class="big_icon" src="/static/mime/{{item.mime}}.svg"/> {{item.name}}</h4>
          <div class="editable" data-cont="{{item.cont}}" data-link="{{item.link}}" data-mime="{{item.mime}}">
          {{#edit}}
          <div class="row-fluid editable-property" data-name="{{name}}" data-type="{{type}}" />
          {{/edit}}
          </div>
          <div class="modal-body">
              <p>{{{body}}}</p>
          </div>
          <div class="modal-footer">
              {{#buttons}}
                {{#onclick}}
                <button onclick="{{onclick}}" class="btn {{class}}"> {{name}}</button>
                {{/onclick}}
                {{^onclick}}
                  <a href="{{href}}" class="btn btn-primary"> {{name}}</a>
                {{/onclick}}
              {{/buttons}}
              <a href="#" data-dismiss="modal" class="btn btn-primary"> Close</a>
          </div>
      </div>
  </script> <!-- END templates -->

  </head>
  <body data-spy="scroll" data-target=".bs-sidebar">

  <div class="navbar navbar-inverse navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
          </a>
          <div class="nav-collapse collapse navbar-responsive-collapse">
              <a class="brand" onclick="view_path('/')" href="#"><img style="height: 1em; vertical-align: -0.16em;" src="/static/img/logo.svg"/>&nbsp;Nanowork</a>
            <ul class="nav">
<!--                <li class="folder-item"><h4 class="listtitle">Sort:</h4></li>-->
                <li class="folder-item"><a href="#" onclick="fix_nav(this); $('.items').isotope({ sortBy : 'name' });">By name</a></li>
                <li class="folder-item"><a href="#" onclick="fix_nav(this); $('.items').isotope({ sortBy : 'type' });">type</a></li>
                <li class="folder-item active"><a href="#" onclick="fix_nav(this); $('.items').isotope({ sortBy : 'original-order' });">or natural</a></li>
                <!--
                <li>
                <a href="/">Remove</a>
                </li>

                <li>
                <a href="#" class="folder-item" title=
                "Download as ZIP">Download</a>
                </li>

                <li class="active">
                <a href="#">Preferences</a>
                </li>
                -->
            </ul>
            <form id="addsearch_form" class="folder-item form-search form-inline form-horizontal" action="/search" method="post" name="addsearch_form">
                <!--    <legend>Legend</legend>-->
                <!--    <label>Label name</label>-->
                <!--    <span class="help-block">Example block-level help text here.</span>-->
                <!--    <label class="checkbox">-->
                <!--      <input type="checkbox"> Check me out-->
                <!--    </label>-->
                <div class="btn-group">
                    <input name="text" type="text" class="btn input-large search-query" placeholder="Type something [Ctrl+Space]"> 
                    <button name="filter" type="submit" onclick= "filter_result();return false;" title="Look for something in current folder" class= "btn btn-info">Filter</button>
                    <button name="search" type="submit" onclick="search_for();return false;" title="Search items in whole database" class="btn">Search</button>
                </div>
                <div class="btn-group pull-right">
                    <button onclick= "show_help()" class="btn btn-info" title="Display help"><b>?</b></button>
                </div>
            </form>
        </div><!--/.nav-collapse -->
      </div>
    </div>
  </div>


  <div class="container-fluid maincontainer">

      <aside id="uploadzone"class="pull-right well autodim folder-item">
          <label for="file" onclick="return alt_panel_toggle()" class="background_text" style="padding: 0; margin:0;">
              <i id="aside_toggler_icon" class="icon-chevron-down" style="margin: 1ex 0 0"></i>
          </label>

          <div onclick="return true" id="up_panel" class="hidden animated slide">
              <div class="row-fluid alt_title">Send file</div>
              <input type="file" class="btn row-fluid" name="file" id="file" title="<i class='icon-folder-open'></i> Select" />
              <button id="upload" class="btn row-fluid btn-primary"> <i class="icon-upload icon-white"></i> Upload!</button>
              <div class="row-fluid"><span id="progress" class="progress">0%</span></div>
              <div class="row-fluid alt_title">Actions</div>
              <button name="add" onclick= "add_new_item()" class="btn btn-primary" style="width: 100%" title="Create a new note"><i class="icon-white icon-list-alt"></i>&nbsp;New note</button>
              <button name="add" onclick= "add_new_item()" class="btn btn-primary" style="width: 100%" title="Create a new note"><i class="icon-download icon-white"></i>&nbsp;Get as .zip</button>
          </div>

      </aside>

      <div class="row-fluid" id="contents"></div>


  </div>

<!-- SCRIPTS -->

  <!--  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>-->
  <!--  <script>window.jQuery || document.write('<script src="/static/Kickstrap/js/jquery-1.7.1.min.js"><\/script>');</script>-->
      <script src="/static/js/jquery-1.8.2.min.js"></script>
      <script src="/static/js/bootstrap.min.js"></script>
      <script src="/static/js/bootstrap.file-input.min.js"> </script> <!-- unify file inputs in forms -->
      <script src="/static/js/jquery.isotope.min.js"></script> <!-- funky list display -->
      <script src="/static/js/ICanHaz.min.js"></script> <!-- templating -->
      <script src="/static/js/hammer.js"></script> <!-- gestures/ mobile integration -->
      <script src="/static/js/jquery.hammer.js"> </script> <!-- jquery integration -->
      <script src="/static/js/bacon.min.js"> </script> <!-- detect mobiles (isMobile())-->
      <script src="/static/js/mousetrap.min.js"> </script> <!-- nice keyboard & mouse events -->
      <script src="/static/js/uploader.js"> </script> <!-- Upload -->
      <script src="/static/js/jquery.pnotify.min.js"> </script> <!-- Notification -->
      <script src="/static/js/epiceditor.min.js"> </script> <!-- Markdown/text editor -->
      <script src="/static/application.js"> </script>
      <script src="/static/mimetypes.js"> </script> <!-- mimetypes structure -->
  </body>
</html>

